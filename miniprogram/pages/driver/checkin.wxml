<!--pages/driver/checkin.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="time-info">
      <text class="current-time">{{currentTime}}</text>
      <text class="current-date">{{currentDate}}</text>
    </view>
    <view class="user-actions">
      <button class="action-btn" bindtap="goToProfile">
        <text class="icon">ğŸ‘¤</text>
      </button>
      <button class="action-btn" bindtap="goToHistory">
        <text class="icon">ğŸ“‹</text>
      </button>
    </view>
  </view>

  <!-- æ‰“å¡çŠ¶æ€ -->
  <view class="status-card">
    <view wx:if="{{todayStatus && todayStatus.hasCheckedIn}}" class="status-success">
      <text class="status-icon">âœ…</text>
      <text class="status-text">ä»Šæ—¥å·²æ‰“å¡</text>
      <text class="status-time">æ‰“å¡æ—¶é—´: {{todayStatus.checkinTime}}</text>
    </view>
    <view wx:else class="status-pending">
      <text class="status-icon">â°</text>
      <text class="status-text">ä»Šæ—¥æœªæ‰“å¡</text>
      <text class="status-hint">è¯·åŠæ—¶å®Œæˆæ‰“å¡</text>
    </view>
  </view>

  <!-- æ‰“å¡æŒ‰é’® -->
  <view class="checkin-section">
    <button 
      class="checkin-btn {{todayStatus && todayStatus.hasCheckedIn ? 'disabled' : ''}}"
      bindtap="doCheckin"
      disabled="{{todayStatus && todayStatus.hasCheckedIn || isChecking}}"
    >
      <view wx:if="{{isChecking}}" class="loading">
        <text class="loading-text">æ‰“å¡ä¸­...</text>
      </view>
      <view wx:else>
        <text class="checkin-icon">ğŸ“</text>
        <text class="checkin-text">
          {{todayStatus && todayStatus.hasCheckedIn ? 'å·²å®Œæˆæ‰“å¡' : 'ç«‹å³æ‰“å¡'}}
        </text>
      </view>
    </button>
  </view>

  <!-- æ‰“å¡è§„åˆ™æç¤º -->
  <view class="rules-section">
    <view class="rule-item">
      <text class="rule-icon">ğŸ•</text>
      <text class="rule-text">æ‰“å¡æ—¶é—´: 08:00 - 08:30</text>
    </view>
    <view class="rule-item">
      <text class="rule-icon">ğŸ“</text>
      <text class="rule-text">éœ€è¦å¼€å¯ä½ç½®æƒé™</text>
    </view>
    <view class="rule-item">
      <text class="rule-icon">ğŸ“</text>
      <text class="rule-text">æœªæ‰“å¡å°†è‡ªåŠ¨è¯­éŸ³æé†’</text>
    </view>
  </view>
</view>